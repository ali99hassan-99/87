<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£ØµÙˆØ§Øª - Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ù†ØªØ®Ø§Ø¨ÙŠ</title>
    <style>
        /* [ØªÙ†Ø³ÙŠÙ‚Ø§Øª CSS Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨] */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; display: flex; min-height: 100vh; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ */
        .sidebar { width: 250px; background-color: #ffffff; box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1); padding: 20px 0; position: fixed; height: 100%; transition: width 0.3s, transform 0.3s; overflow-x: hidden; z-index: 20; }
        .sidebar.collapsed { width: 70px; }
        .logo-box { text-align: center; padding: 0 10px 20px; }
        .logo-box img { width: 50px; height: 50px; object-fit: contain; }
        .sidebar nav { padding: 0 10px; }
        .sidebar nav a { display: flex; align-items: center; padding: 12px 10px; color: #333; text-decoration: none; border-radius: 4px; margin-bottom: 8px; transition: background-color 0.3s; font-size: 0.95rem; }
        .sidebar nav a:hover, .sidebar nav a.active { background-color: #e6e6e6; }
        .sidebar nav a .icon { margin-left: 10px; font-size: 1.1rem; color: #6c5ce7; }
        .sidebar.collapsed nav a span:not(.icon) { display: none; }
        .sidebar.collapsed nav a .icon { margin-left: 0; margin-right: 0; }
        .sidebar h3 { text-align: center; font-size: 0.9rem; color: #666; margin: 5px 0; }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ */
        .main-content { flex-grow: 1; margin-right: 250px; padding: 20px; transition: margin-right 0.3s; }
        .main-content.expanded { margin-right: 70px; }
        .header { display: flex; justify-content: space-between; align-items: center; background-color: #fff; padding: 15px 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); margin-bottom: 25px; }
        .menu-toggle-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6c5ce7; margin-left: 15px; }
        .user-profile-menu { position: relative; cursor: pointer; }
        .user-avatar { display: flex; align-items: center; gap: 10px; }
        .user-avatar img {
            width: 44px;
            height: 44px;
            border-radius: 50%; border: 2px solid #6c5ce7; object-fit: cover;
        }
        .dropdown-menu {
            position: absolute; top: 55px; left: 0;
            background: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 10px 0;
            width: 250px;
            z-index: 100; opacity: 0; visibility: hidden; transform: translateY(-10px);
            transition: all 0.2s ease-in-out; text-align: right;
        }
        .dropdown-menu.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .user-details { display: flex; justify-content: space-between; align-items: center; padding: 5px 15px; }
        .user-name-tag { background-color: #f0f0f0; color: #6c5ce7; padding: 5px 10px; border-radius: 4px; font-size: 0.9rem; font-weight: 500; }
        .logout-btn { width: 100%; text-align: right; background: none; border: none; padding: 10px 15px; cursor: pointer; color: #cc0000; font-size: 1rem; display: flex; align-items: center; justify-content: flex-end; gap: 10px; transition: background-color 0.2s; }
        .vote-entry-container { width: 100%; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); }
        .section-title-box { text-align: left; color: #666; font-size: 1.1rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .info-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .form-field { flex-grow: 1; min-width: 0; text-align: right; }
        .form-field label { display: block; font-size: 0.9rem; color: #666; margin-bottom: 5px; text-align: center; }
        .form-field input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; font-size: 1rem; text-align: center; }
        .votes-grid { border: 1px solid #eee; border-radius: 6px; margin-top: 30px; }
        .grid-header { display: flex; font-weight: bold; background-color: #f9f9f9; padding: 10px 0; border-bottom: 1px solid #eee; }
        .grid-header .col-votes { flex-grow: 3; text-align: center; }
        .grid-header .col-seq { flex-grow: 1; min-width: 70px; text-align: center; }
        .grid-row { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .grid-row .col-votes { flex-grow: 3; padding: 0 15px; }
        .grid-row .col-seq { flex-grow: 1; min-width: 70px; text-align: center; padding: 0 10px; }
        .col-seq div { padding: 10px; background-color: #f0f0f0; border-radius: 4px; }
        .col-votes input { border: 1px solid #c9c3ec; background-color: #fff; text-align: right; }
        .action-buttons { margin-top: 30px; display: flex; justify-content: right; gap: 15px; }
        .action-buttons button { padding: 10px 25px; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500; }
        .action-buttons .save-btn { background-color: #6c5ce7; color: white; }
        .action-buttons .reset-btn { background-color: #e0e0e0; color: #333; }

        /* === Ø§Ù„ØªØ¬Ø§ÙˆØ¨ (Responsive) Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙˆØ£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ§Ø¨Ù„Øª === */
        @media (max-width: 768px) {
            /* ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ØªÙƒÙˆÙ† Ù…Ø®ÙÙŠØ© Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„ (translateX) */
            .sidebar {
                width: 250px;
                transform: translateX(100%);
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
                left: unset;
                right: 0;
                position: fixed;
                padding-top: 60px;
            }
            /* ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ Ø§Ù„ÙƒÙ„Ø§Ø³ activeSidebar Ù‡Ùˆ Ù…Ø§ ÙŠØ¬Ø¹Ù„Ù‡Ø§ Ø¸Ø§Ù‡Ø±Ø© (ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ translateX(0)) */
            .sidebar.activeSidebar {
                transform: translateX(0);
            }

            /* Ù†Ù„ØºÙŠ ØªØ£Ø«ÙŠØ±Collapsed Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙÙŠ CSS */
            .sidebar.collapsed {
                width: 250px;
            }

            .main-content { margin-right: 0; width: 100%; padding: 10px; }
            .main-content.expanded { margin-right: 0; }
            .header { padding: 10px 15px; position: sticky; top: 0; z-index: 10; margin-bottom: 10px; }
            .header h1 { font-size: 1.2rem; }
            .menu-toggle-btn { order: 3; margin-left: 0; margin-right: 10px; }
            .user-avatar img { width: 36px; height: 36px; }
            .vote-entry-container { padding: 15px; }
            .info-row { flex-direction: column; gap: 10px; }
            .form-field input { font-size: 0.95rem; }
            .grid-header { padding: 8px 0; font-size: 0.9rem; }
            .grid-row .col-seq { flex-grow: 0.5; min-width: 50px; }
            .grid-row .col-votes { flex-grow: 4; }
            .grid-row .col-votes input { font-size: 1.1rem; }
            .col-seq div { padding: 8px; }
            .action-buttons { justify-content: space-between; }
            .action-buttons button { padding: 10px 15px; flex-grow: 1; }
        }
    </style>
</head>
<body>

    <div class="sidebar" id="sidebar">
        <div class="logo-box"> <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…"> </div>
        <h3 id="currentUserName">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ---</h3>
        <h3 id="currentUserSection">Ø§Ù„Ù‚Ø³Ù…: ---</h3>
        <nav>
            <a href="#"> <span class="icon">ğŸ“„</span> <span>ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙƒÙŠØ§Ù†</span> </a>
            <a href="#"> <span class="icon">ğŸ“</span> <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù†ØµØ±Ø§Ù ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙƒÙŠØ§Ù†</span> </a>
            <a href="#"> <span class="icon">ğŸ‘¥</span> <span>ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ù…Ø±Ø§Ù‚Ø¨ÙŠ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</span> </a>
            <a href="#" class="active"> <span class="icon">ğŸ“Š</span> <span>Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</span> </a>
            <a href="#" > <span class="icon">ğŸ“</span> <span>Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬</span> </a>
        </nav>
    </div>

    <div class="main-content" id="mainContent">
        <div class="header">
            <button class="menu-toggle-btn" id="menuToggleBtn">â˜°</button>
            <h1>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ù†ØªØ®Ø§Ø¨ÙŠ</h1>
            <div class="user-profile-menu">
                <div class="user-avatar" id="userAvatarBtn"> <img src="avatar.jpg" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"> </div>
                 <div class="dropdown-menu" id="userDropdown">
                    <div class="user-details"> <span id="dropdownUserName" class="user-name-tag"></span> <span class="icon">ğŸ‘¤</span> </div>
                    <hr>
                    <button class="logout-btn" id="logoutBtn"> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ <span class="icon">ğŸ”Œ</span> </button>
                </div>
            </div>
        </div>

        <div class="vote-entry-container">
            <div class="section-title-box">Ø§Ù„Ù‚Ø³Ù… <span id="displaySectionNumber">1</span></div>
            <div class="info-row">
                <div class="form-field" style="flex-basis: 30%;"> <label>Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ø¨</label> <input type="text" value="Ø­Ø±ÙƒØ© Ø§Ù„ØµØ§Ø¯Ù‚ÙˆÙ†" readonly> </div>
                <div class="form-field"> <label>Ø£ØµÙˆØ§Øª Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</label> <input type="text" value="-" readonly> </div>
                <div class="form-field"> <label>Ø£ØµÙˆØ§Øª Ø§Ù„Ø­Ø²Ø¨ ÙÙ‚Ø·</label> <input type="text" value="-" readonly> </div>
                <div class="form-field"> <label>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</label> <input type="text" value="-" readonly> </div>
                <div class="form-field" style="flex-basis: 15%;"> <label>Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙ (X1)</label> <input type="number" value="38" readonly> </div>
            </div>

            <div class="votes-grid">
                <div class="grid-header"> <div class="col-votes">Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª</div> <div class="col-seq">Ø§Ù„ØªØ³Ù„Ø³Ù„</div> </div>
                <form id="voteForm">
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="1" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="1">1</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="2" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="2">2</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="3" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="3">3</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="4" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="4">4</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="5" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="5">5</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="6" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="6">6</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="7" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="7">7</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="8" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="8">8</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="9" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="9">9</div> </div> </div>
                    <div class="grid-row"> <div class="col-votes"> <input type="number" data-seq="10" value="" placeholder="*"> </div> <div class="col-seq"> <div data-seq-display="10">10</div> </div> </div>
                </form>
            </div>

            <div class="action-buttons"> <button class="reset-btn">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø¨Ø¦Ø©</button> <button class="save-btn">Ø­ÙØ¸</button> </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const menuToggleBtn = document.getElementById('menuToggleBtn');
            const displaySectionNumber = document.getElementById('displaySectionNumber');

            // ğŸ’¡ Ù…Ù†Ø·Ù‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø®ÙØ§Ø¡/Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© - Ø§Ø³ØªØ®Ø¯Ø§Ù… activeSidebar Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ğŸ’¡
            menuToggleBtn.addEventListener('click', () => {
                const isDesktop = window.innerWidth > 768;

                if (isDesktop) {
                    // Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨: Ù†Ø³ØªØ®Ø¯Ù… collapsed Ù„ØªØµØºÙŠØ± Ø§Ù„Ø´Ø±ÙŠØ· ÙˆØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
                    sidebar.classList.toggle('collapsed');
                    mainContent.classList.toggle('expanded');
                } else {
                    // Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù†Ø³ØªØ®Ø¯Ù… activeSidebar Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ø£Ùˆ Ø¥Ø®ÙØ§Ø¦Ù‡
                    sidebar.classList.toggle('activeSidebar');
                }
            });

            // *** Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯Ø©: ØªØ£ÙƒÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø© ***
            window.addEventListener('resize', () => {
                const isDesktop = window.innerWidth > 768;

                if (isDesktop) {
                    // Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…ÙØªÙˆØ­Ø© ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø·Ø¨ÙŠØ¹ÙŠ
                    sidebar.classList.remove('collapsed');
                    sidebar.classList.remove('activeSidebar'); // Ø¥Ø²Ø§Ù„Ø© ÙƒÙ„Ø§Ø³ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
                    mainContent.classList.remove('expanded');
                } else {
                    // Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ Ù†Ù„ØºÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙƒØ¨ÙŠØ± Ù„Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨
                    mainContent.classList.remove('expanded');
                    sidebar.classList.remove('collapsed'); // Ù†Ù„ØºÙŠ ÙƒÙ„Ø§Ø³ Ø§Ù„ØªØµØºÙŠØ± Ù„Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨
                }
            });

            // ğŸ’¡ Ù…Ù†Ø·Ù‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ğŸ’¡
            const userDataString = localStorage.getItem('currentUser');

            if (!userDataString) {
                alert('âŒ ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„. Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.');
                window.location.href = 'index.html';
                return;
            }

            let user;
            try {
                user = JSON.parse(userDataString);
                const fullName = user.full_name || user.username;
                const sectionId = user.section_id || 'Ø¹Ø§Ù…';

                document.getElementById('currentUserName').innerHTML = `Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <b>${fullName}</b>`;
                document.getElementById('currentUserSection').innerHTML = `Ø§Ù„Ù‚Ø³Ù…: <b>${sectionId}</b>`;
                displaySectionNumber.textContent = sectionId;
                document.getElementById('dropdownUserName').textContent = fullName;

                const userAvatarBtn = document.getElementById('userAvatarBtn');
                const userDropdown = document.getElementById('userDropdown');
                const logoutBtn = document.getElementById('logoutBtn');

                userAvatarBtn.addEventListener('click', (e) => {
                    userDropdown.classList.toggle('active');
                    e.stopPropagation();
                });

                document.addEventListener('click', (e) => {
                    if (userDropdown.classList.contains('active') && !userDropdown.contains(e.target) && !userAvatarBtn.contains(e.target)) {
                        userDropdown.classList.remove('active');
                    }
                });

                logoutBtn.addEventListener('click', () => {
                    localStorage.removeItem('currentUser');
                    alert('ğŸ‘‹ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­.');
                    window.location.href = 'index.html';
                });

            } catch (e) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Local Storage:", e);
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        });
    </script>
</body>
</html>